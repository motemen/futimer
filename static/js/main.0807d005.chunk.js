(this.webpackJsonpfuTimer=this.webpackJsonpfuTimer||[]).push([[0],{10:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m}));var A=n(14),r=n.n(A),a=n(50),s=n(15),c=n(25),o=n(84),i=n.n(o),l=n(52),u=n(37),d=n(86),p=i()(),h={recordAttempt:p("RECORD_ATTEMPT"),updateScramble:p("UPDATE_SCRAMBLE"),deleteRecord:p("DELETE_RECORD"),updateSessionIsSynced:p("UPDATE_SESSION_IS_SYNCED"),updateSyncSpreadsheetId:p("UPDATE_SYNC_SPREADSHEET_ID"),updateIsAuthed:p("UPDATE_IS_AUTHED"),changePuzzleType:p("CHANGE_PUZZLE_TYPE"),changeToolType:p("CHANGE_TOOL_TYPE"),changeIsPlaying:p("CHANGE_IS_PLAYING"),createNewSession:p("CREATE_NEW_SESSION"),startRecordsUpload:p("START_RECORDS_UPLOAD"),finishRecordsUpload:p("FINISH_RECORDS_UPLOAD"),deleteAllRecords:p("DELETE_ALL_RECORDS")},m={syncRecords:function(){return function(){var e=Object(c.a)(r.a.mark((function e(t,n){var A,c,o,i,d,p,m,g,f,E;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A=n(),c=A.sync,o=A.results,!c.isSyncing){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u.b.signIn();case 5:if(i=new l.a(u.b),d=c.spreadsheetId){e.next=13;break}return e.next=10,i.getFile();case 10:p=e.sent,d=p.id,t(h.updateSyncSpreadsheetId({spreadsheetId:d}));case 13:if(0!==(m=o.map((function(e,t){var n=e.session,A=e.isSynced;return Object(s.a)({},n,{isSynced:A,index:t})})).filter((function(e){return!e.isSynced}))).length){e.next=16;break}return e.abrupt("return");case 16:t(h.startRecordsUpload()),g=Object(a.a)(m),e.prev=18,g.s();case 20:if((f=g.n()).done){e.next=27;break}return E=f.value,e.next=24,i.uploadSession(d,E);case 24:t(h.updateSessionIsSynced({index:E.index,isSynced:!0}));case 25:e.next=20;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(18),g.e(e.t0);case 32:return e.prev=32,g.f(),e.finish(32);case 35:t(h.finishRecordsUpload());case 36:case"end":return e.stop()}}),e,null,[[18,29,32,35]])})));return function(t,n){return e.apply(this,arguments)}}()},resetScramble:function(){return function(t,n){var A=n().current.session.puzzleType;e((function(){Object(d.a)(A).then((function(e){t(h.updateScramble({scramble:e}))}))}))}},commitRecord:function(e){return function(t,n){t(h.recordAttempt(e)),t(m.resetScramble())}},changePuzzleType:function(e){return function(t){t(h.changePuzzleType(e)),t(m.resetScramble())}}}}).call(this,n(114).setImmediate)},102:function(e,t,n){e.exports=n(127)},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var A=n(14),r=n.n(A),a=n(25),s=n(0),c=n(12),o=n(20),i=n(28),l=n(71),u=n(81),d=n(82),p=n.n(d),h=n(83),m=n(10),g=n(17),f=n(18),E=n(21),I=n(22),v=n(154),b=n(157),C=n(158),Q=n(173),B=n(8),y=n(87),S=n.n(y),O=function(e){Object(I.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var A=arguments.length,r=new Array(A),a=0;a<A;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).handlePuzzleTypeChange=function(t){e.props.dispatch(m.b.changePuzzleType({puzzle:t.target.value}))},e}return Object(f.a)(n,[{key:"render",value:function(){return s.createElement(v.a,{position:"static",elevation:0},s.createElement(b.a,null,s.createElement(C.a,{variant:"h6",color:"inherit",style:{textTransform:"uppercase",marginRight:20}},s.createElement("img",{alt:"fuTimer",src:S.a,width:"16",height:"16",style:{marginRight:4}}),"fuTimer"),s.createElement(Q.a,{native:!0,value:this.props.puzzleType,onChange:this.handlePuzzleTypeChange},Object.keys(B.a).sort().map((function(e){return s.createElement("option",{value:e,key:e},B.a[e].longName)})))))}}]),n}(s.Component);var k=Object(o.b)((function(e){return{puzzleType:e.current.session.puzzleType}}))(O),w=n(15),j=n(13),T=n(70),x=n.n(T),R=n(48),P=n.n(R),z=n(175),J=n(97),N=n(5),D=n(66),_=n(161),M=function(e){Object(I.a)(n,e);var t=Object(E.a)(n);function n(e){var A;return Object(g.a)(this,n),(A=t.call(this,e)).state={},A.startTime=null,A.animTimer=null,A.timerRef=void 0,A.prevScramble=void 0,A.record=null,A.focusVisible=void 0,A.handleWindowFocus=function(){A.focusVisible()},A.handleTimerContextMenu=function(e){e.preventDefault()},A.handleButtonMount=function(e){e.focusVisible(),A.focusVisible=e.focusVisible},A.handleHoldStart=function(e){A.startTime?A.stopTimer():A.record||"keydown"===e.type&&"space"!==x()(e.nativeEvent)||A.startTime||A.state.holdStarted||A.setState({holdStarted:performance.now()})},A.handleHoldEnd=function(e){if("keyup"!==e.type||"space"===x()(e.nativeEvent)){if(A.record){var t=Object(w.a)({},A.record);return A.props.dispatch(m.b.commitRecord({record:t})),void(A.record=null)}var n=A.state.holdStarted;n&&(A.setState({holdStarted:void 0}),performance.now()-n<=550||null===A.startTime&&A.startTimer())}},A.timerRef=s.createRef(),A}return Object(f.a)(n,[{key:"componentWillMount",value:function(){this.props.dispatch(m.b.resetScramble())}},{key:"componentWillUnmount",value:function(){window.removeEventListener("focus",this.handleWindowFocus)}},{key:"componentDidMount",value:function(){this.timerRef.current.innerText=Object(B.d)(0),window.addEventListener("focus",this.handleWindowFocus,{passive:!0})}},{key:"componentWillReceiveProps",value:function(){this.prevScramble=this.props.scramble}},{key:"render",value:function(){return s.createElement("div",null,s.createElement("div",{className:P()(this.props.classes.scramble,Object(j.a)({},this.props.classes.isLoading,!this.props.scramble))},s.createElement("code",null,this.props.scramble||this.prevScramble||"Generating\u2026")),s.createElement(J.a,{action:this.handleButtonMount,onTouchStart:this.handleHoldStart,onTouchEnd:this.handleHoldEnd,onKeyDown:this.handleHoldStart,onKeyUp:this.handleHoldEnd,onMouseDown:this.handleHoldStart,onMouseUp:this.handleHoldEnd,component:"button",focusRipple:!0,classes:{root:P()(this.props.classes.button,this.props.classes.timer,Object(j.a)({},this.props.classes.isHolding,this.state&&Boolean(this.state.holdStarted)))},TouchRippleProps:{classes:{childPulsate:this.props.classes.buttonChildPulsate}},onContextMenuCapture:this.handleTimerContextMenu},s.createElement("pre",{ref:this.timerRef})))}},{key:"startTimer",value:function(){var e=this;this.record=null;!function t(){e.startTime||(e.startTime=performance.now());var n=Math.floor(performance.now()-e.startTime)/1e3;e.timerRef.current.innerText=Object(B.d)(n),e.animTimer=window.requestAnimationFrame(t)}(),this.props.dispatch(m.a.changeIsPlaying({isPlaying:!0}))}},{key:"stopTimer",value:function(){if(!this.animTimer||!this.startTime)throw new Error("stopTimer: invalid state");window.cancelAnimationFrame(this.animTimer);var e=Math.floor(performance.now()-this.startTime)/1e3;this.timerRef.current.innerText=Object(B.d)(e),this.record={scramble:this.props.scramble,time:e,timestamp:performance.timing.navigationStart+this.startTime},this.animTimer=null,this.startTime=null,this.props.dispatch(m.a.changeIsPlaying({isPlaying:!1}))}}]),n}(s.Component);var U=Object(o.b)((function(e){return{scramble:e.current.scramble}}))(Object(N.a)((function(e){var t;return Object(z.a)({"@keyframes holding-color-change":{from:{color:D.a.A700},to:{color:_.a.A700}},button:{color:e.palette.grey[300],transition:"color 0.25s","&:focus":{backgroundColor:"#eee",color:e.palette.text.primary}},buttonChildPulsate:{animation:"none",display:"none"},isHolding:{animation:"".concat(550,"ms step-end $holding-color-change both")},scramble:{fontSize:e.typography.h5.fontSize,marginTop:e.spacing(3),marginLeft:e.spacing(),marginRight:e.spacing(),textAlign:"center",transition:"color 0.5s"},timer:(t={},Object(j.a)(t,e.breakpoints.down("xs"),{fontSize:e.typography.h2.fontSize}),Object(j.a)(t,"fontSize",e.typography.h1.fontSize),Object(j.a)(t,"padding",e.spacing(2)),Object(j.a)(t,"margin","".concat(e.spacing(3),"px 0")),Object(j.a)(t,"textAlign","center"),Object(j.a)(t,"width","100%"),Object(j.a)(t,"touchAction","none"),Object(j.a)(t,"WebkitTouchCallout","none"),Object(j.a)(t,"userSelect","none"),t),isLoading:{color:e.palette.grey[300]}})}))(M)),L=n(128),W=n(178),H=n(129),F=n(169),G=n(176),V=n(162),X=n(174),q=n(163),Y=n(164),K=n(165),Z=n(166),$=n(167),ee=n(168),te=n(95),ne=n(177),Ae=function(e){Object(I.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var A=arguments.length,r=new Array(A),a=0;a<A;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleRecordMoreClick=function(t){return function(n){e.setState({recordMenuAnchor:n.currentTarget,activeRecordIndex:t})}},e.handleRecordMenuClose=function(){e.setState({recordMenuAnchor:void 0})},e.handleDeleteRecordClick=function(){e.props.dispatch(m.a.deleteRecord({sessionIndex:e.props.resultIndex,recordIndex:e.state.activeRecordIndex})),e.handleRecordMenuClose()},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=Object(B.c)(this.props.session.records);return s.createElement(G.a,{defaultExpanded:this.props.defaultExpanded},s.createElement(V.a,{classes:{content:this.props.classes.summaryContent,root:this.props.classes.root}},s.createElement(X.a,{xsDown:!0},s.createElement(C.a,{className:this.props.classes.title},-1===this.props.resultIndex?"Current Session":this.props.session.name," ","(",B.a[this.props.session.puzzleType].longName,")")),s.createElement(C.a,{className:this.props.classes.summary,component:"div"},[100,12,5].map((function(e){var n=t.averageOf[e];return n?s.createElement("div",{key:e},s.createElement(X.a,{xsDown:!0},"Best ao",e,": ",Object(B.d)(n.best)||"N/A")," ",s.createElement(X.a,{xsDown:!0},"Curr "),s.createElement("span",null,"ao",e,": ",Object(B.d)(n.current)||"N/A")):null}))),s.createElement("div",{style:{flex:1}}),this.props.actionButton),s.createElement(q.a,{style:{padding:0}},s.createElement(Y.a,null,s.createElement(K.a,null,s.createElement(Z.a,null,s.createElement($.a,{className:this.props.classes.number},"#"),s.createElement($.a,{className:this.props.classes.timestamp},"Timestamp"),s.createElement($.a,{className:this.props.classes.scramble},"Scramble"),s.createElement($.a,null,"Time"),s.createElement($.a,null))),s.createElement(ee.a,null,this.props.session.records.slice().reverse().map((function(t,n){var A=e.props.session.records.length-(n+1);return s.createElement(Z.a,{key:A},s.createElement($.a,{className:e.props.classes.number},A+1),s.createElement($.a,{className:e.props.classes.timestamp},e.formatTimestamp(t.timestamp)),s.createElement($.a,{className:e.props.classes.scramble},s.createElement("code",null,t.scramble)),s.createElement($.a,{align:"right"},s.createElement("code",null,Object(B.d)(t.time))),s.createElement($.a,{padding:"checkbox"},s.createElement(H.a,{onClick:e.handleRecordMoreClick(A)},s.createElement(F.a,null,"more_vert"))))})))),s.createElement(te.a,{anchorEl:this.state.recordMenuAnchor,open:Boolean(this.state.recordMenuAnchor),onClose:this.handleRecordMenuClose},s.createElement(ne.a,{onClick:this.handleDeleteRecordClick},"Delete"))))}},{key:"formatTimestamp",value:function(e){return new Date(e).toLocaleString()}}]),n}(s.Component),re=Object(o.b)()(Object(N.a)((function(e){return Object(z.a)({scramble:Object(j.a)({},e.breakpoints.down("xs"),{display:"none"}),summary:{color:e.palette.text.secondary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},summaryContent:{"& > :last-child":{paddingRight:0}},timestamp:Object(j.a)({},e.breakpoints.down("xs"),{display:"none"}),number:{},title:{flexBasis:"20%"},root:Object(j.a)({paddingRight:"16px !important"},e.breakpoints.up("sm"),{paddingRight:"24px !important"})})}))(Ae)),ae=function(e){Object(I.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var A=arguments.length,r=new Array(A),a=0;a<A;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleSyncClick=function(){void 0!==e.props.isAuthed&&e.props.dispatch(m.b.syncRecords())},e.handleNewSessionClick=function(){e.props.dispatch(m.a.createNewSession())},e.handleOpenSheetClick=function(){var t="https://docs.google.com/spreadsheets/d/".concat(e.props.spreadsheetId,"/edit");window.open(t)},e.handleDeleteAllRecordsClick=function(){confirm("Delete all records?")&&e.props.dispatch(m.a.deleteAllRecords())},e}return Object(f.a)(n,[{key:"render",value:function(){return s.createElement("div",null,s.createElement(L.a,{className:this.props.classes.root,elevation:1},s.createElement(re,{session:this.props.session,resultIndex:-1,defaultExpanded:!0,actionButton:s.createElement(W.a,{title:"Save records"},s.createElement("div",null,s.createElement(H.a,{style:{marginTop:-16,marginBottom:-16},onClick:this.handleNewSessionClick,disabled:0===this.props.session.records.length},s.createElement(F.a,null,"save"))))})),s.createElement(L.a,{className:this.props.classes.root,elevation:1},s.createElement(b.a,null,s.createElement(C.a,null,"History"),s.createElement("div",{className:this.props.classes.spacer}),this.props.isAuthed&&this.props.spreadsheetId?s.createElement(W.a,{title:"Open spreadsheet"},s.createElement(H.a,{onClick:this.handleOpenSheetClick},s.createElement(F.a,null,"open_in_new"))):null,s.createElement(W.a,{title:"Delete records"},s.createElement("div",null,s.createElement(H.a,{onClick:this.handleDeleteAllRecordsClick,disabled:0===this.props.results.length},s.createElement(F.a,null,"delete")))),s.createElement(H.a,{onClick:this.handleSyncClick},this.props.isAuthed?this.props.syncDone?s.createElement(W.a,{title:"Synced all records"},s.createElement(F.a,null,"cloud_done")):s.createElement(W.a,{title:"Sync records"},s.createElement(F.a,{className:P()(Object(j.a)({},this.props.classes.isSyncing,this.props.isSyncing))},"sync")):!1===this.props.isAuthed?s.createElement(F.a,null,"cloud_off"):s.createElement(F.a,{color:"disabled"},"cloud_off"))),this.props.results.map((function(e,t){var n=e.session;e.stats;return s.createElement(re,{session:n,resultIndex:t,key:t})}))))}}]),n}(s.Component);var se=Object(o.b)((function(e){var t=e.current.session,n=e.results,A=e.auth.isAuthed,r=e.sync,a=r.isSyncing,s=r.spreadsheetId;return{isAuthed:A,isSyncing:a,results:n.map((function(e){return Object(w.a)({},e,{stats:Object(B.c)(e.session.records)})})),spreadsheetId:s,syncDone:n.every((function(e){return e.isSynced})),session:t}}))(Object(N.a)((function(e){return Object(z.a)({"@keyframes spin-l":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(-360deg)"}},isSyncing:{animation:"$spin-l 1.5s linear infinite"},root:Object(j.a)({margin:e.spacing(2),marginTop:0,overflowX:"auto"},e.breakpoints.down("sm"),{marginLeft:0,marginRight:0,borderRadius:0}),spacer:{flex:"1"},title:{flexBasis:"20%"}})}))(ae)),ce=n(46),oe=n(41),ie=n(93),le=function(e,t){var n=e.records;return n.splice(t,1),Object(w.a)({},e,{records:n})},ue=Object(oe.reducerWithInitialState)(B.e.current).case(m.a.deleteRecord,(function(e,t){var n=t.sessionIndex,A=t.recordIndex;return-1===n?Object(w.a)({},e,{session:le(e.session,A)}):e})).case(m.a.updateScramble,(function(e,t){var n=t.scramble;return Object(w.a)({},e,{scramble:n})})).case(m.a.recordAttempt,(function(e,t){var n=t.record;return e.scramble?Object(w.a)({},e,{scramble:void 0,session:Object(w.a)({},e.session,{records:[].concat(Object(ce.a)(e.session.records),[n])})}):e})),de=Object(oe.reducerWithInitialState)(B.e.sync).case(m.a.startRecordsUpload,(function(e){return Object(w.a)({},e,{isSyncing:!0})})).case(m.a.finishRecordsUpload,(function(e){return Object(w.a)({},e,{isSyncing:!1})})).case(m.a.updateSyncSpreadsheetId,(function(e,t){var n=t.spreadsheetId;return Object(w.a)({},e,{spreadsheetId:n})})),pe=Object(oe.reducerWithInitialState)(B.e.results).case(m.a.deleteRecord,(function(e,t){var n=t.sessionIndex,A=t.recordIndex;return e.map((function(e,t){return t===n?Object(w.a)({},e,{session:le(e.session,A)}):e})).filter((function(e){return e.session.records.length>0}))})).case(m.a.updateSessionIsSynced,(function(e,t){var n=t.index,A=t.isSynced;return e.map((function(e,t){return t===n?Object(w.a)({},e,{isSynced:A}):e}))})).case(m.a.deleteAllRecords,(function(e,t){return[]})),he=Object(oe.reducerWithInitialState)(B.e.auth).case(m.a.updateIsAuthed,(function(e,t){var n=t.isAuthed;return Object(w.a)({},e,{isAuthed:n})}));function me(e,t){var n=e.current.session;return Object(w.a)({},e,{current:Object(w.a)({},e.current,{scramble:(t||n.puzzleType)===n.puzzleType?e.current.scramble:void 0,session:{puzzleType:t||n.puzzleType,records:[]}}),results:0===n.records.length?e.results:[{isSynced:!1,session:Object(w.a)({},n,{name:new Date(n.records[0].timestamp).toLocaleString()})}].concat(Object(ce.a)(e.results))})}var ge=Object(oe.reducerWithInitialState)(B.e.tool).case(m.a.changeToolType,(function(e,t){var n=t.toolType;return Object(w.a)({},e,{selected:n})})),fe=Object(oe.reducerWithoutInitialState)().case(m.a.changeIsPlaying,(function(e,t){var n=t.isPlaying;return Object(w.a)({},e,{isPlaying:n})})).case(m.a.createNewSession,(function(e){return me(e)})).case(m.a.changePuzzleType,(function(e,t){return me(e,t.puzzle)})),Ee=Object(ie.a)(fe,Object(i.c)({current:ue,sync:de,auth:he,results:pe,tool:ge})),Ie=(n(125),n(126),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ve(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var be=n(37),Ce=n(94),Qe=n(172),Be=n(171),ye=n(170),Se=n(52),Oe=n(50),ke=function(e){Object(I.a)(n,e);var t=Object(E.a)(n);function n(e){var A;return Object(g.a)(this,n),(A=t.call(this,e)).open=function(e){var t=null;return Object(a.a)(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=t||e(),n.next=3,t;case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))}(Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0});case 2:A.stream=e.sent,A.videoRef.current.srcObject=A.stream,A.videoRef.current.play();case 5:case"end":return e.stop()}}),e)})))),A.recorder=void 0,A.chunks=void 0,A.videoRef=void 0,A.stream=void 0,A.videoRef=s.createRef(),A}return Object(f.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.isPlaying;!!this.props.isPlaying!==!!t&&(t?this.start():this.stop())}},{key:"componentDidMount",value:function(){this.open()}},{key:"componentWillUnmount",value:function(){this.close()}},{key:"close",value:function(){if(this.stream){var e,t=Object(Oe.a)(this.stream.getVideoTracks());try{for(t.s();!(e=t.n()).done;){e.value.stop()}}catch(n){t.e(n)}finally{t.f()}this.stream=void 0}}},{key:"start",value:function(){var e=Object(a.a)(r.a.mark((function e(){var t=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stream){e.next=3;break}return e.next=3,this.open();case 3:this.chunks=[],this.recorder=new MediaRecorder(this.stream),this.recorder.ondataavailable=function(e){t.chunks.push(e.data)},this.recorder.onstop=function(e){t.download()},this.recorder.start();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.recorder&&this.recorder.stop()}},{key:"download",value:function(){var e=new Blob(this.chunks),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="".concat(this.props.scramble||"record",".webm"),n.click()}},{key:"render",value:function(){return s.createElement("div",null,s.createElement("video",{muted:!0,ref:this.videoRef,style:{maxWidth:"100%"}}))}}]),n}(s.Component);var we=Object(o.b)((function(e){return{isPlaying:e.isPlaying,scramble:e.current.scramble}}))(ke),je=function(e){Object(I.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var A=arguments.length,r=new Array(A),a=0;a<A;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).ref=s.createRef(),e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.updatePreview(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=e.puzzleType,n=e.scramble;this.props.puzzleType===t&&this.props.scramble===n||this.updatePreview({scramble:n,puzzleType:t})}},{key:"render",value:function(){return s.createElement("div",{ref:this.ref},"preview")}},{key:"updatePreview",value:function(e){var t=e.scramble,n=e.puzzleType;if("undefined"!==typeof tnoodlejs){var A=tnoodlejs.scrambleToSvg(t,new puzzle[B.a[n].tnoodleImpl]);this.ref.current.innerHTML=A,this.ref.current.querySelector("svg").style.width="100%",this.ref.current.querySelector("svg").style.height="auto"}}}]),n}(s.Component);var Te=Object(o.b)((function(e){var t=e.current,n=t.scramble;return{puzzleType:t.session.puzzleType,scramble:n}}))(je),xe=function(e){Object(I.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=Object(B.c)(this.props.records);return s.createElement(Y.a,null,s.createElement(K.a,null,s.createElement(Z.a,null,s.createElement($.a,null),s.createElement($.a,null,"Current"),s.createElement($.a,null,"Best"))),s.createElement(ee.a,null,[1,5,12,100].map((function(t){var n=1===t?e.single:e.averageOf[t];return n?s.createElement(Z.a,{key:t},s.createElement($.a,null,1===t?"single":"ao".concat(t)),s.createElement($.a,null,Object(B.d)(n.current)),s.createElement($.a,null,Object(B.d)(n.best))):null}))))}}]),n}(s.Component);var Re=Object(o.b)((function(e){return{records:e.current.session.records}}))(xe),Pe=function(e){Object(I.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(g.a)(this,n);for(var A=arguments.length,r=new Array(A),a=0;a<A;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).handleTypeChange=function(t){e.props.dispatch(m.a.changeToolType({toolType:t.target.value}))},e}return Object(f.a)(n,[{key:"render",value:function(){return s.createElement(L.a,{elevation:1,className:this.props.classes.root},s.createElement(b.a,null,s.createElement(C.a,{style:{marginRight:20}},"Tools"),s.createElement(Q.a,{native:!0,value:this.props.selected,onChange:this.handleTypeChange},Object.keys(B.b).sort().map((function(e){return s.createElement("option",{value:B.b[e],key:e},e)})))),s.createElement("div",{className:this.props.classes.content},this.renderContent()))}},{key:"renderContent",value:function(){var e;return((e={},Object(j.a)(e,B.b.Recorder,(function(){return s.createElement(we,null)})),Object(j.a)(e,B.b.Stats,(function(){return s.createElement(Re,null)})),Object(j.a)(e,B.b.Preview,(function(){return s.createElement(Te,null)})),e)[this.props.selected]||function(){return s.createElement("span",null,"stats")})()}}]),n}(s.Component);var ze=Object(o.b)((function(e){return{selected:e.tool.selected}}))(Object(N.a)((function(e){return Object(z.a)({root:{marginRight:e.spacing(2)},content:{padding:e.spacing()}})}))(Pe));be.b.on(be.a.UPDATE_SIGNED_IN,function(){var e=Object(a.a)(r.a.mark((function e(t){var n,A,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(De.dispatch(m.a.updateIsAuthed({isAuthed:t})),n=De.getState(),n.sync.spreadsheetId){e.next=8;break}return A=new Se.a(be.b),e.next=6,A.getFile();case 6:a=e.sent,De.dispatch(m.a.updateSyncSpreadsheetId({spreadsheetId:a.id}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var Je={debug:!1,key:"root",storage:p.a,transforms:[],whitelist:["current","results","tool"]},Ne=Object(l.a)(Je,Ee),De=Object(i.e)(Ne,(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d)(Object(i.a)(h.a))),_e=Object(l.b)(De);window.store=De;var Me=Object(Ce.a)({palette:{primary:{main:"#ef0"},secondary:{main:ye.a.A700}}});c.render(s.createElement(Be.a,{theme:Me},s.createElement(o.a,{store:De},s.createElement(u.a,{persistor:_e},s.createElement(k,null),s.createElement(U,null),s.createElement(Qe.a,{container:!0},s.createElement(Qe.a,{item:!0,xs:12,md:8},s.createElement(se,null)),s.createElement(X.a,{smDown:!0},s.createElement(Qe.a,{item:!0,md:4},s.createElement(ze,null))))))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/futimer",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/futimer","/service-worker.js");Ie?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ve(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):ve(e)}))}}()},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return d}));var A,r=n(14),a=n.n(r),s=n(25),c=n(17),o=n(18),i=n(21),l=n(22),u=n(85);!function(e){e.UPDATE_SIGNED_IN="updateSignedIn"}(A||(A={}));var d=new(function(e){Object(l.a)(n,e);var t=Object(i.a)(n);function n(e){var A;return Object(c.a)(this,n),(A=t.call(this)).opts=e,A.SCRIPT_SOURCE="https://apis.google.com/js/api.js",A.loadP=void 0,A.loadScriptP=void 0,A.load(),A}return Object(o.a)(n,[{key:"load",value:function(){var e=this;return this.loadP||(this.loadP=Object(s.a)(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadScript();case 2:return n=t.sent,t.next=5,new Promise((function(e){return n.load("client:auth2",e)}));case 5:return t.next=7,n.client.init(e.opts);case 7:return(r=n.auth2.getAuthInstance())&&(e.emit(A.UPDATE_SIGNED_IN,r.isSignedIn.get()),r.isSignedIn.listen((function(t){return e.emit(A.UPDATE_SIGNED_IN,t)}))),t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})))())}},{key:"signIn",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t,n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=e.sent,e.abrupt("return",new Promise((function(e,r){var a=t.auth2.getAuthInstance();a.isSignedIn.get()?e():(n.once(A.UPDATE_SIGNED_IN,(function(t){t?e():r()})),a.signIn())})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadScript",value:function(){var e=this;return"undefined"!==typeof gapi?Promise.resolve(gapi):this.loadScriptP?this.loadScriptP:this.loadScriptP=new Promise((function(t,n){var A=document.createElement("script");A.setAttribute("src",e.SCRIPT_SOURCE),A.addEventListener("load",(function(){e.loadScriptP=void 0;!function e(){"undefined"===typeof gapi?setTimeout(e,50):t(gapi)}()})),A.addEventListener("error",(function(t){e.loadScriptP=void 0,n("Failed to load ".concat(e.SCRIPT_SOURCE))})),document.querySelector("head").appendChild(A)}))}}]),n}(u.EventEmitter))({clientId:"23865407017-lkl10fer74t07o0rmoa44i4vfdkjaokp.apps.googleusercontent.com",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4","https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"https://www.googleapis.com/auth/drive.file"})},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var A=n(14),r=n.n(A),a=n(25),s=n(17),c=n(18),o=n(8),i=function(){function e(t){Object(s.a)(this,e),this.googleAPI=t,this.getFileP=void 0}return Object(c.a)(e,[{key:"uploadSession",value:function(){var e=Object(a.a)(r.a.mark((function e(t,n){var A,a,s,c,i,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A=n.name,a=n.puzzleType,s=n.records,e.next=3,this.googleAPI.signIn();case 3:return e.next=5,this.googleAPI.load();case 5:return c=e.sent,i=s.map((function(e){var t=e.scramble,n=e.time,r=e.timestamp;return[A,new Date(r).toLocaleString(),n,t]})),l=o.a[a].longName,e.next=10,this.ensureSheet(t,l);case 10:return e.next=12,c.client.sheets.spreadsheets.values.append({range:"'".concat(l,"'!A1"),spreadsheetId:t,valueInputOption:"USER_ENTERED"},{values:i});case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getFile",value:function(){var e=Object(a.a)(r.a.mark((function e(){var t=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getFileP){e.next=2;break}return e.abrupt("return",this.getFileP);case 2:return e.abrupt("return",this.getFileP=Object(a.a)(r.a.mark((function e(){var n,A,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.googleAPI.load();case 2:return n=e.sent,e.next=5,n.client.drive.files.list({orderBy:"createdTime desc"});case 5:if(!((A=e.sent).result.files&&A.result.files.length>0)){e.next=8;break}return e.abrupt("return",A.result.files[0]);case 8:return e.next=10,n.client.drive.files.create({},{mimeType:"application/vnd.google-apps.spreadsheet",name:"Speedcubing records"});case 10:return a=e.sent,e.abrupt("return",a.result);case 12:case"end":return e.stop()}}),e)})))());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ensureSheet",value:function(){var e=Object(a.a)(r.a.mark((function e(t,n){var A;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.googleAPI.load();case 2:return A=e.sent,e.next=5,A.client.sheets.spreadsheets.get({spreadsheetId:t});case 5:if(!e.sent.result.sheets.some((function(e){return e.properties.title===n}))){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,A.client.sheets.spreadsheets.batchUpdate({spreadsheetId:t},{requests:[{addSheet:{properties:{title:n}}}]});case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},8:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return u}));var A=n(46),r=n(13),a=n(15);function s(e){if(!e||0===e.length)return{averageOf:{}};var t=e.map((function(e){return e.time}));return{averageOf:[5,12,100].reduce((function(e,n){var A=t.length>=n?function(e,t){if(t.length<e)throw new Error("not enough scores: ".concat(t.length," < ").concat(e));var n=function(e,t){return new Array(t.length-e+1).fill(null).map((function(n,A){return t.slice(A,A+e)}))}(e,t).map((function(e){return c(e)})).reduce((function(e,t){return{best:Math.min(t,e.best),worst:Math.max(t,e.worst)}}),{best:Number.MAX_VALUE,worst:Number.MIN_VALUE}),A=n.best,r=n.worst;return{best:A,current:c(t.slice(-e)),worst:r}}(n,t):null;return Object(a.a)({},e,Object(r.a)({},n,A))}),{}),single:{best:Math.min.apply(Math,Object(A.a)(t)),current:t[t.length-1],worst:Math.max.apply(Math,Object(A.a)(t))}}}function c(e){var t=e.slice().sort((function(e,t){return e<t?1:e>t?-1:0}));return function(e){return e.reduce((function(e,t){return e+t}),0)/e.length}(t.slice(1,t.length-1))}function o(e){if(void 0!==e){var t,n,A=e.toString().split(/\./)[1]||"",r=Math.floor(e/60),a=Math.floor(e%60);return(r?"".concat(r,":"):"")+(t=a.toString(),n=r?"0":" ",2===t.length?t:n+t)+"."+(A+"00").substring(0,2)}}var i,l={222:{longName:"2x2x2",tnoodleImpl:"TwoByTwoCubePuzzle"},333:{longName:"3x3x3",tnoodleImpl:"ThreeByThreeCubePuzzle"},444:{longName:"4x4x4",tnoodleImpl:"FourByFourCubePuzzle"},minx:{longName:"Megaminx",tnoodleImpl:"MegaminxPuzzle"},pyram:{longName:"Pyraminx",tnoodleImpl:"PyraminxPuzzle"},skewb:{longName:"Skewb",tnoodleImpl:"SkewbPuzzle"},sq1:{longName:"Square-1",tnoodleImpl:"SquareOnePuzzle"}};!function(e){e.Recorder="recorder",e.Stats="stats",e.Preview="preview"}(i||(i={}));var u={current:{session:{puzzleType:"333",records:[]}},sync:{isSyncing:!1},auth:{},results:[],tool:{selected:i.Stats}}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var A=new Promise((function(e,t){window.puzzlesLoaded=e,setTimeout((function(){return t("TNoodle load timeout after ".concat(30,"s"))}),3e4),n.e(3).then(n.t.bind(null,131,7)).catch(t)}));function r(e){return A.then((function(t){return t[e].generateScramble()}))}},87:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAEAQAAAAO4cAyAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0T//xSrMc0AAAAHdElNRQfiCBAUDBEqG2glAAAI4klEQVR42u3asW7qQBRF0TdPTp3//9dIkyJ9JDsJF7PX6oGjsYuNYe39DwCI+T89AAB4PAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQdEwP+Im1phcAULf39IJrbh0AX749+rOX5cplfMRr7Hq+z3iWXe8X3hP4Nff9KvoCAfCtsxfmthcSAM7wHwAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIKO6QGvYO/pBVStNb3A/c+cZ7j/78wTAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBx/QA4N7Wml4AXOEJAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIKO6QHAdXtPL4A5a00vuDdPAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAEHdMDXsF6m15wwp4e8OKc799yvn/L+aYIgN/wMT0AAM7xEwAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEHH9ICfW2t6AQDczdp7egIA8Gh+AgCAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAj6BFvBJhHeZtL7AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA4LTE2VDExOjEyOjE3KzA5OjAw70uAeQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wOC0xNlQxMToxMjoxNyswOTowMJ4WOMUAAAAASUVORK5CYII="}},[[102,1,2]]]);
//# sourceMappingURL=main.0807d005.chunk.js.map